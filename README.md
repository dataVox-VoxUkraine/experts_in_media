Послідовність дій для пошуку експертів:
  1. Знайти всі іменні сутності з допомогою NER і помітити ті з них, які зустрічаються в реченнях з ключовими словами (1_Names_and_Keywords_search.ipynb)
    1.1. all_ent_str - рядок у усіма сутностями в новині
    1.2. names_and_kw_str - рядок з іменами, що зустрічаються з ключовими словами
    1.3. Списки перетворюємо в рядки з якимись дивними роздільниками, бо я не знаю, як зберігати списки у csv файли
  2. Відфільтрувати сутності та об'єднати їх у списки за подібністю (2_Make_dictionaries_of_similar_name_entities.ipynb):
    2.1. Відкинути ті, де немає великих літер, імен і де оцінка моделі NER < 0.5
    2.2. Скласти для кожної новини списки імен, що в ній зустрічаються (на основі цих фільтрованих сутностей) - filt_pers_list
    2.3. Простемити ці імена у списках - stem_pers_list
    2.4. Для кожної пари простемлених імен у списку знайти міри подібності: wratio і partial_ratio (stem_partial_ratio і stem_wratio)
    2.5. На основі цих мір подібності скласти словники сутностей, які відповідають одному й тому ж імені. Ключем виступає індекс сутності у списку, значенням є список індексів сутностей, які подібні до цієї, що в ключі (similarity_dicts)
    2.6. За цими словниками скласти множини імен, що позначають одну і ту ж людину (names_sets)
    2.7. Із цих множин з кроку 8 вибрати одне ім’я, яке має представляти всю множину: це або найдовший варіант або такий, що відповідає структурі “Ім’я Прізвище” (one_name_per_set)
    2.8. Описані кроки виконати для всіх імен, що знайдені у новині, а перші 2 кроки (2.1 і 2.2) виконати також для тих імен, що зустрічаються з ключовими словами (filt_kw_names_str)
  3. Імена, що зустрічаються разом з ключовими словами перевірити з допомогою бібліотеки stanza (3_Check_by_conllu.ipynb)
    3.1. Скласти дерева залежностей для речень з іменними сутностями і перевірити, чи ім’я виступає підметом для ключового дієслова
      3.1.1. Запускаємо функцію sentence_check покроково на масиві всіх новин, бо вона працює довго (частину я проганяю на ноуті, ще частину на колабі)
    3.2. Вибираємо ті імена, у яких є зв’язок з ключовим присудком
  4. Залишити у списках імен тільки ті, що пройшли перевірку синтаксичними деревами (4_Filter_after_conllu_check.ipynb)
    4.1. Отримуємо список перевірених сутностей
  5. Шукаємо перевірені імена у списках подібних імен з кроку 2 і вибираємо для різних форм одну унікальну (5_Checked_names_to_unique_names.ipynb) 
    5.1. Перевірені імена проганяємо по словниках з кроку 2, вибираємо для кожного імені один відповідник, що є ключем у словнику, видаляємо дублікати у списках і отримуємо списки унікальних, по можливості повних, імен, що згадуються в кожній новині (find_checked_names_in_dicts)
  6. Проганяємо пошук отриманих імен по раніше сформованих словниках імен і іменних форм (6_Searching_for_names_in_dicts.ipynb)
    6.1. Імена в новинах шукаємо в словнику joined_names_dict.csv - це файл, що уже був сформований раніше, який містить імена з усіх попередніх місяців та відповідні їм форми
      6.1.1. Спочатку шукаємо імена з новин у індексі цього файлу - функція find_names_in_dict
      6.1.2. Далі шукаємо імена з новин у рядках з формами імен - функція find_names_in_variants
    6.2. Ім'я вважаємо знайденим (і додаємо у словник names_from_dict), якщо воно є в індексі цього файлу або є у списку форм якогось іншого імені
    6.3. Так отримуємо списку знайдених імен у новинах - тобто тих імен, що вже є у нашому словнику
    6.4. Імена, яких у словнику немає, додаємо в його кінець, щоб потім за можливості злити їх з іншими формами
  7. Якщо якісь імена були додані у словник, то робимо злиття різних форм (7_Processing_Name_Counts_Dicts.ipynb)
    7.1. Тут шукаються різні варіанти одного й того ж імені: українською та російською (find_lang_variants) і варіанти з якимись додатковими словами (find_contains_variants)
    7.2. Потім вони зливаються до однієї сутності, де є індекс (конкретна унікальна імені) та список форм, що позначають те саме ім'я
  8. Власне підрахунок кількості згадок експертів (8_Experts_counting_and_saving.ipynb)
    8.1. Завантажуємо файли з новинами за останній місяць і за два попередні
    8.2. Рахуємо згадки експертів за цей місяць (all_ments_df) і за попередні (prev_df) у всіх 5 категоріях і в кожній з категорій окремо (by_cat_df)
    8.3. Вивантажуємо у файли топ-експертів у кожній з категорій (якщо ім'я згадувалося цього місяця принаймні 20 разів і минулих місяців у середньому не менше 20 разів) і у всіх категоріях (30 таких імен)
  9. Вивантажуємо файл зі сферами експертів (9_Get_experts_spheres.ipynb)
